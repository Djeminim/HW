# Makefile

# Имя переменной, которая хранит имя исполняемого файла, который создается после компиляции
TARGET = Demo_Kyrs_V6.exe

# Директория для заголовочных файлов
INCLUDE_DIR = include

# Имя переменной, которая хранит исходные .c файлы
SRC = Demo_Kyrs_V6.c temp_functions.c

# Заменяет расширение .c на .o для каждого файла в SRC
OBJ = $(SRC: .c = .o)

# Переменная CC, которая содержит имя компилятора
CC = gcc

# Флаги компиляции -Wall — включает все предупреждения -g — включает отладочную информацию
CFLAGS = -Wall -g -I$(INCLUDE_DIR)

# Цель по умолчанию — начало программы. $ — подстановка значений переменной
all: $(TARGET)

# Правило для сборки исполняемого файла
# Проверка зависимостей .exe файла и .o файлов
$(TARGET): $(OBJ)
	$(CC) -o $@ $^

# Правило для компиляции объектных файлов .o, если они не создались в OBJ или устарели
# %.o — шаблон для объектных файлов.
# %.c — шаблон для исходных файлов.
%.o: %.c
	$(CC) $(CFLAGS) -c $< -o $@

# Правило для очистки
clean:
	del $(TARGET)